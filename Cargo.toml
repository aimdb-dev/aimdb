[workspace]
members = [
    "aimdb-core",
    "aimdb-embassy-adapter",
    "aimdb-tokio-adapter",
    "aimdb-macros",
    "tools/aimdb-cli",
    "examples",
]
resolver = "2"
# Note: build aimdb-core only by default. Use make all to build the full workspace!
default-members = ["aimdb-core"]

[workspace.package]
version = "0.1.0"
edition = "2021"
authors = ["AimDB Team <team@aimdb.dev>"]
license = "Apache-2.0"
repository = "https://github.com/aimdb-dev/aimdb"
homepage = "https://aimdb.dev"
description = "Async in-memory database for real-time synchronization across MCU → edge → cloud environments"
keywords = ["database", "async", "embedded", "real-time", "sync"]
categories = ["database-implementations", "embedded", "asynchronous"]

[workspace.dependencies]
# Core async runtime
tokio = { version = "1.47.1", features = ["macros", "rt-multi-thread"] }

# Serialization
serde = { version = "1.0", features = ["derive"] }

# Error handling
thiserror = "2.0.16"
anyhow = "1.0"

# Serialization - extend with error handling
serde_json = "1.0"

# Basic observability
tracing = { version = "0.1", default-features = false }

# Metrics
metrics = "0.23"

# Async utilities
futures = "0.3"

# CLI (for aimdb-cli)
clap = { version = "4.0", features = ["derive"] }

# Development dependencies
tokio-test = "0.4"

# Embassy ecosystem for embedded async
embassy-executor = { version = "0.9.1" }
embassy-time = "0.5"

# Embedded HAL for peripheral abstractions
embedded-hal = "1.0"
embedded-hal-async = "1.0"
embedded-hal-nb = "1.0"

[workspace.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]
