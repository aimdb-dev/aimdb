[package]
name = "aimdb-data-contracts"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true
homepage.workspace = true
description = "Data contracts for AimDB: portable schemas with built-in versioning and simulation support"
keywords = ["aimdb", "iot", "edge", "schema", "contracts"]
categories = ["embedded", "no-std"]

[features]
default = ["std"]
alloc = ["serde/alloc"]
std = ["alloc", "serde/std"]
linkable = ["alloc", "serde_json"]
simulatable = ["rand"]
migratable = ["std", "serde_json"]
observable = ["alloc", "aimdb-core", "aimdb-executor"]
ts = ["std", "ts-rs"]

[dependencies]
serde = { version = "1.0", default-features = false, features = ["derive"] }
serde_json = { version = "1.0", optional = true }

# Optional dependencies for observable feature (log_tap function)
# Note: aimdb-core requires alloc feature for core functionality
aimdb-core = { path = "../aimdb-core", optional = true, default-features = false, features = [
    "alloc",
] }
aimdb-executor = { path = "../aimdb-executor", optional = true, default-features = false }

[dependencies.rand]
version = "0.8"
optional = true
default-features = false
features = ["std_rng"]

[dependencies.ts-rs]
version = "10"
optional = true

[dev-dependencies]
serde_json = "1.0"
